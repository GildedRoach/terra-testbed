From c4a950cfb4fb78a6009c3834b9875606d4bde475 Mon Sep 17 00:00:00 2001
Message-ID: <c4a950cfb4fb78a6009c3834b9875606d4bde475.1727252245.git.github@sicherha.de>
In-Reply-To: <6b57f8b406dc5105d5d83c8b937c3491c7f3852c.1727252245.git.github@sicherha.de>
References: <6b57f8b406dc5105d5d83c8b937c3491c7f3852c.1727252245.git.github@sicherha.de>
From: Christoph Erhardt <github@sicherha.de>
Date: Sat, 20 Jan 2024 23:58:00 +0100
Subject: [PATCH 2/2] [ELF][S390X] Skip another test that fails with GCC 14

---
 test/rodata-name.sh | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/test/rodata-name.sh b/test/rodata-name.sh
index def5a6fd..f5de4b4a 100755
--- a/test/rodata-name.sh
+++ b/test/rodata-name.sh
@@ -5,6 +5,10 @@
 # Concretely speaking, ARM as uses "@" as a start of a comment.
 [ $MACHINE = arm ] && skip
 
+# GCC produces buggy code for this test case on s390x.
+# https://sourceware.org/bugzilla/show_bug.cgi?id=29655
+[ $MACHINE = s390x ] && $CC -v 2>&1 | grep -E '^gcc version 14\.' && skip
+
 cat <<'EOF' | $CC -c -o $t/a.o -x assembler -
 .globl val1, val2, val3, val4, val5
 
-- 
2.46.1

