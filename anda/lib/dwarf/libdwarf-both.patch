From 472a7ff891d1847b0f3a98325a0bfc2a60a8df82 Mon Sep 17 00:00:00 2001
From: Tom Hughes <tom@compton.nu>
Date: Tue, 25 Jun 2024 08:55:46 +0100
Subject: [PATCH] Make default-library=both work on linux

---
 src/lib/libdwarf/meson.build  | 6 +++---
 src/lib/libdwarfp/meson.build | 6 +++---
 2 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/src/lib/libdwarf/meson.build b/src/lib/libdwarf/meson.build
index a958b732..c0753db4 100644
--- a/src/lib/libdwarf/meson.build
+++ b/src/lib/libdwarf/meson.build
@@ -120,10 +120,10 @@ else
     libzstd_deps = dependency('',required: false)
 endif
 
-if (lib_type == 'shared')
-  compiler_flags = ['-DLIBDWARF_BUILD']
-else
+if (lib_type == 'static')
   compiler_flags = ['-DLIBDWARF_STATIC']
+else
+  compiler_flags = ['-DLIBDWARF_BUILD']
 endif
 
 libdwarf_lib = library('dwarf', libdwarf_src,
diff --git a/src/lib/libdwarfp/meson.build b/src/lib/libdwarfp/meson.build
index 33b5340e..9c527111 100644
--- a/src/lib/libdwarfp/meson.build
+++ b/src/lib/libdwarfp/meson.build
@@ -31,10 +31,10 @@ libdwarfp_src = [
 ]
 
 libdwarf_dir = include_directories('../libdwarf')
-if (lib_type == 'shared')
-  compiler_flags = ['-DLIBDWARF_BUILD']
-else
+if (lib_type == 'static')
   compiler_flags = ['-DLIBDWARF_STATIC']
+else
+  compiler_flags = ['-DLIBDWARF_BUILD']
 endif
 
 
-- 
2.45.2

